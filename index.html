<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prashanta Subedi ‚Äî Web & App Developer</title>
  <meta name="description" content="Prashanta Subedi - Web & App Developer specializing in modern, performant websites and cross-platform applications." />
  <meta name="keywords" content="web developer, app developer, react, react native, node.js, typescript, python" />
  <meta name="author" content="Prashanta Subedi" />
  
  <!-- Open Graph meta tags for better social sharing -->
  <meta property="og:title" content="Prashanta Subedi ‚Äî Web & App Developer" />
  <meta property="og:description" content="I design and build modern, performant websites and cross-platform apps." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://prashantasubedi.github.io/" />
  
  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Enhanced Google Analytics (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S30R3Z9MYJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    
    // Initialize with enhanced tracking
    gtag('js', new Date());
    
    // Enhanced configuration with all features enabled
    gtag('config', 'G-S30R3Z9MYJ', {
      'anonymize_ip': false, // Set to true if you want to anonymize IPs for GDPR
      'allow_google_signals': true,
      'allow_ad_personalization_signals': true,
      'send_page_view': true,
      'custom_map': {
        'custom_dimension_1': 'user_type',
        'custom_dimension_2': 'interaction_type'
      }
    });
    
    // Enhanced ecommerce tracking
    gtag('config', 'G-S30R3Z9MYJ', {
      'currency': 'USD',
      'enhanced_conversions': true
    });
    
    // Track user engagement metrics
    gtag('event', 'page_view', {
      'page_title': document.title,
      'page_location': window.location.href
    });
  </script>

  <meta name="theme-color" content="#e9f2fb">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë®‚Äçüíª</text></svg>">

  <!-- Lottie Player Script -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    :root {
      /* Light theme colors */
      --bg: #f4f7fb;
      --card: #ffffff;
      --muted: #6b7280;
      --text: #0b1220;
      --accent: #0ea5ff;
      --accent-2: #7c3aed;
      --accent-light: rgba(14, 165, 255, 0.1);
      --accent-2-light: rgba(124, 58, 237, 0.1);
      --radius: 14px;
      --max-width: 1100px;
      --ease: cubic-bezier(.2, .9, .3, 1);
      --shadow-lg: 0 18px 50px rgba(11, 18, 32, 0.06);
      --shadow-sm: 0 8px 28px rgba(11, 18, 32, 0.05);
      --transition: all 0.3s var(--ease);
      --chat-bg: #ffffff;
      --chat-sent: #0ea5ff;
      --chat-received: #f1f5f9;
      --chat-typing: #94a3b8;
    }

    /* Dark theme colors */
    [data-theme="dark"] {
      --bg: #0f172a;
      --card: #1e293b;
      --muted: #94a3b8;
      --text: #f1f5f9;
      --accent: #38bdf8;
      --accent-2: #a78bfa;
      --accent-light: rgba(56, 189, 248, 0.1);
      --accent-2-light: rgba(167, 139, 250, 0.1);
      --shadow-lg: 0 18px 50px rgba(0, 0, 0, 0.25);
      --shadow-sm: 0 8px 28px rgba(0, 0, 0, 0.15);
      --chat-bg: #1e293b;
      --chat-sent: #38bdf8;
      --chat-received: #f1f5f9;
      --chat-typing: #64748b;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      height: 100%;
      scroll-behavior: smooth;
    }

    body {
      height: 100%;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg) 0%, var(--card) 40%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.6;
      -webkit-tap-highlight-color: transparent;
      overflow-x: hidden;
      transition: var(--transition);
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 2rem;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 60;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(11, 18, 32, 0.04);
      transition: var(--transition);
    }

    [data-theme="dark"] header {
      background: rgba(15, 23, 42, 0.8);
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    }

    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem 1rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.9rem;
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      color: white;
      box-shadow: var(--shadow-sm);
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    /* Wind blowing animation for logo */
    .logo::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transform: rotate(45deg);
      transition: all 0.6s;
      opacity: 0;
    }

    .logo:hover {
      transform: scale(1.05) rotate(2deg);
    }

    .logo:hover::before {
      animation: windBlow 1.5s ease-in-out;
    }

    @keyframes windBlow {
      0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
        opacity: 0;
      }
      20% {
        opacity: 0.8;
      }
      100% {
        transform: translateX(200%) translateY(100%) rotate(45deg);
        opacity: 0;
      }
    }

    /* Wind particles */
    .logo::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.7) 0%, transparent 2%),
        radial-gradient(circle at 60% 70%, rgba(255, 255, 255, 0.5) 0%, transparent 1.5%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.6) 0%, transparent 1%);
      background-size: 10px 10px;
      opacity: 0;
      pointer-events: none;
    }

    .logo:hover::after {
      animation: windParticles 1.5s ease-out;
    }

    @keyframes windParticles {
      0% {
        opacity: 0;
        transform: translateX(0);
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translateX(15px);
      }
    }

    nav {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    nav a {
      color: var(--muted);
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 10px;
      transition: var(--transition);
      font-weight: 600;
      position: relative;
      overflow: hidden;
    }

    nav a::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.3s ease;
    }

    nav a:hover {
      color: var(--text);
      background: var(--accent-light);
      transform: translateY(-2px);
    }

    nav a:hover::before {
      transform: scaleX(1);
      transform-origin: left;
    }

    .cta {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      padding: 8px 14px;
      border-radius: 10px;
      color: white;
      font-weight: 700;
      box-shadow: var(--shadow-lg);
      border: 0;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .cta::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .cta:hover::before {
      left: 100%;
    }

    .cta:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(14, 165, 255, 0.3);
    }

    /* Theme toggle button */
    .theme-toggle {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      transition: var(--transition);
    }

    .theme-toggle:hover {
      background: var(--accent-light);
      color: var(--accent);
    }

    .theme-toggle svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    /* HERO */
    .hero {
      padding: 6rem 0 3rem;
      position: relative;
      overflow: visible;
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 2rem;
      align-items: start;
    }

    @media (max-width: 980px) {
      .hero {
        grid-template-columns: 1fr;
        padding: 3.5rem 0;
      }
    }

    /* ensure hero content sits above decorative shapes */
    .hero-left {
      position: relative;
      z-index: 6;
    }

    .hero-left h2 {
      margin: 0 0 .6rem 0;
      font-size: clamp(26px, 6vw, 44px);
      line-height: 1.02;
      letter-spacing: -0.01em;
      font-weight: 800;
      color: var(--text);
      opacity: 0;
      transform: translateY(14px);
      transition: all .9s var(--ease);
      position: relative;
      z-index: 6;
    }

    .hero-left p {
      color: var(--muted);
      margin: .9rem 0 1.2rem 0;
      max-width: 64ch;
      opacity: 0;
      transform: translateY(12px);
      transition: all .9s var(--ease) .08s;
      position: relative;
      z-index: 6;
    }

    .actions {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .btn-outline {
      border: 1px solid rgba(11, 18, 32, 0.1);
      padding: 10px 14px;
      border-radius: 10px;
      color: var(--text);
      background: transparent;
      font-weight: 700;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    [data-theme="dark"] .btn-outline {
      border-color: rgba(255, 255, 255, 0.1);
    }

    .btn-outline::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      opacity: 0;
      transition: opacity 0.3s;
      z-index: -1;
    }

    .btn-outline:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-sm);
      color: white;
    }

    .btn-outline:hover::before {
      opacity: 1;
    }

    .btn-primary {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      padding: 10px 14px;
      border-radius: 10px;
      color: white;
      border: 0;
      font-weight: 700;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      transition: var(--transition);
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(14, 165, 255, 0.3);
    }

    /* Sections */
    section {
      padding: 3rem 0;
    }

    h2 {
      margin: 0 0 1rem 0;
      font-size: 1.5rem;
      font-weight: 700;
      position: relative;
      display: inline-block;
    }

    h2::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 50px;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border-radius: 3px;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    @media (max-width: 940px) {
      .cards {
        grid-template-columns: repeat(1, 1fr);
      }
    }

    .card {
      background: var(--card);
      border: 1px solid rgba(11, 18, 32, 0.04);
      padding: 1.6rem;
      border-radius: 12px;
      transition: var(--transition);
      transform: translateY(8px);
      opacity: 0;
      color: var(--text);
      box-shadow: var(--shadow-sm);
      position: relative;
      overflow: hidden;
    }

    [data-theme="dark"] .card {
      border-color: rgba(255, 255, 255, 0.04);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s ease;
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-lg);
    }

    .card:hover::before {
      transform: scaleX(1);
    }

    .card h3 {
      margin: 0 0 .6rem 0;
      color: var(--text);
      font-size: 1.2rem;
    }

    .card p {
      color: var(--muted);
      margin: 0;
    }

    /* Request form */
    .form {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.2rem;
      background: linear-gradient(180deg, var(--card), rgba(250, 250, 252, 0.5));
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid rgba(11, 18, 32, 0.04);
      position: relative;
      overflow: hidden;
    }

    [data-theme="dark"] .form {
      background: linear-gradient(180deg, var(--card), rgba(30, 41, 59, 0.5));
      border-color: rgba(255, 255, 255, 0.04);
    }

    @media (max-width: 760px) {
      .form {
        grid-template-columns: 1fr;
      }
    }

    .field {
      position: relative;
    }

    .field label {
      display: block;
      margin-bottom: 6px;
      color: var(--muted);
      font-size: .9rem;
      font-weight: 600;
    }

    .field input,
    .field textarea,
    .field select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid rgba(11, 18, 32, 0.06);
      background: transparent;
      color: var(--text);
      outline: none;
      font-weight: 600;
      transition: var(--transition);
    }

    [data-theme="dark"] .field input,
    [data-theme="dark"] .field textarea,
    [data-theme="dark"] .field select {
      border-color: rgba(255, 255, 255, 0.06);
    }

    .field textarea {
      min-height: 120px;
      resize: vertical;
    }

    .field input:focus,
    .field textarea:focus,
    .field select:focus {
      box-shadow: 0 0 0 3px var(--accent-light);
      transform: translateY(-2px);
      border-color: var(--accent);
    }

    .submit-wrap {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .hint {
      color: var(--muted);
      font-size: .9rem;
    }

    /* Mail me button */
    .mail-me-btn {
      background: var(--accent-light);
      color: var(--accent);
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.9rem;
    }

    [data-theme="dark"] .mail-me-btn {
      background: var(--accent-2-light);
      color: var(--accent-2);
    }

    .mail-me-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    /* floating light shapes (subtle) */
    .shapes {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      overflow: visible;
    }

    .shape {
      position: absolute;
      border-radius: 50%;
      opacity: 0.75;
      mix-blend-mode: screen;
      animation: floatLight 9s ease-in-out infinite;
      filter: blur(14px);
    }

    .s1 {
      width: 420px;
      height: 420px;
      background: linear-gradient(135deg, var(--accent-light), var(--accent-2-light));
      left: -120px;
      top: -80px;
      animation-delay: 0s;
    }

    .s2 {
      width: 260px;
      height: 260px;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.06), var(--accent-light));
      right: -60px;
      bottom: -60px;
      animation-duration: 11s;
      animation-delay: 1s;
    }

    .s3 {
      width: 160px;
      height: 160px;
      background: linear-gradient(135deg, rgba(249, 115, 22, 0.06), rgba(236, 72, 153, 0.05));
      left: 60%;
      top: 18%;
      opacity: 0.55;
      animation-duration: 13s;
      animation-delay: 2s;
    }

    @keyframes floatLight {
      0% {
        transform: translateY(0) scale(1);
      }

      50% {
        transform: translateY(-18px) scale(1.03);
      }

      100% {
        transform: translateY(0) scale(1);
      }
    }

    /* pebble animation (subtle translucent circles on light BG) */
    .pebbles {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 3;
      overflow: visible;
    }

    .pebble {
      position: absolute;
      border-radius: 999px;
      background: rgba(11, 18, 32, 0.04);
      width: var(--size, 40px);
      height: var(--size, 40px);
      opacity: 0.9;
      filter: blur(6px);
      animation: drift var(--dur, 9s) linear infinite;
      transform-origin: center;
    }

    [data-theme="dark"] .pebble {
      background: rgba(255, 255, 255, 0.04);
    }

    .pebble.small {
      --size: 18px;
      --dur: 8s;
      opacity: 0.5;
    }

    .pebble.med {
      --size: 32px;
      --dur: 10s;
      opacity: 0.55;
    }

    .pebble.big {
      --size: 64px;
      --dur: 14s;
      opacity: 0.28;
    }

    @keyframes drift {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
        opacity: inherit;
      }

      25% {
        transform: translate3d(18px, -22px, 0) scale(1.03);
      }

      50% {
        transform: translate3d(-6px, -36px, 0) scale(0.98);
      }

      75% {
        transform: translate3d(-20px, 10px, 0) scale(1.02);
      }

      100% {
        transform: translate3d(0, 0, 0) scale(1);
      }
    }

    /* reveal animations controlled by JS */
    .reveal {
      transform: translateY(18px);
      opacity: 0;
      transition: all .64s var(--ease);
    }

    .reveal.is-visible {
      transform: none;
      opacity: 1;
    }

    /* hero typed / rotator */
    .intro {
      display: flex;
      gap: .8rem;
      align-items: baseline;
      flex-wrap: wrap;
      line-height: 1.02;
    }

    .intro .name {
      font-weight: 800;
      color: var(--text);
      font-size: clamp(18px, 4vw, 34px);
    }

    .typed {
      color: var(--accent);
      font-weight: 700;
      min-width: 10ch;
      height: 1.06em;
      display: inline-block;
      vertical-align: bottom;
    }

    .typed .cursor {
      display: inline-block;
      background: var(--text);
      width: 2px;
      height: 1.06em;
      margin-left: 6px;
      animation: blink 1s step-start infinite;
    }

    @keyframes blink {
      50% {
        opacity: 0;
      }
    }

    /* profile full panel (kept but unobtrusive) */
    .profile-full {
      margin-top: 1rem;
      background: linear-gradient(180deg, var(--card), var(--card));
      border: 1px solid rgba(11, 18, 32, 0.03);
      padding: 1rem;
      border-radius: 12px;
      display: none;
      box-shadow: var(--shadow-sm);
      position: relative;
      z-index: 6;
    }

    [data-theme="dark"] .profile-full {
      border-color: rgba(255, 255, 255, 0.03);
    }

    .profile-full.open {
      display: block;
      animation: fadeIn .28s ease both;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }

      to {
        opacity: 1;
        transform: none;
      }
    }

    .list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: .6rem;
    }

    @media (max-width: 780px) {
      .list {
        grid-template-columns: 1fr;
      }
    }

    /* helpers */
    a.underline {
      position: relative;
      color: var(--accent);
      text-decoration: none;
    }

    a.underline::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -3px;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width .28s var(--ease);
    }

    a.underline:hover::after {
      width: 100%;
    }

    a:focus,
    button:focus,
    input:focus,
    select:focus,
    textarea:focus {
      outline: 3px solid var(--accent-light);
      outline-offset: 3px;
      border-radius: 8px;
    }

    /* Tag styles */
    .tag {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 6px;
      background: var(--accent-light);
      color: var(--accent);
      font-size: 0.8rem;
      font-weight: 600;
    }

    [data-theme="dark"] .tag {
      background: var(--accent-2-light);
      color: var(--accent-2);
    }

    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Footer */
    footer {
      padding: 2rem 0;
      margin-top: 3rem;
      border-top: 1px solid rgba(11, 18, 32, 0.04);
    }

    [data-theme="dark"] footer {
      border-top-color: rgba(255, 255, 255, 0.04);
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .footer-left {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .social {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(11, 18, 32, 0.05);
      color: var(--muted);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    [data-theme="dark"] .social-link {
      background: rgba(255, 255, 255, 0.05);
    }

    .social-link:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-sm);
    }

    .social-link.github:hover {
      background: #333;
      color: white;
    }

    .social-link.linkedin:hover {
      background: #0077b5;
      color: white;
    }

    .social-link.instagram:hover {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      color: white;
    }

    .social-link.email:hover {
      background: #ea4335;
      color: white;
    }

    .social-link.privacy:hover {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
    }

    .social-link svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    /* Toast notification */
    #toast {
      position: fixed;
      right: 20px;
      bottom: 20px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      padding: 12px 18px;
      border-radius: 12px;
      box-shadow: var(--shadow-lg);
      z-index: 80;
      opacity: 0;
      transform: translateY(8px);
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #toast.show {
      opacity: 1;
      transform: none;
    }

    /* Success and error states */
    .success {
      color: #10b981;
    }

    .error {
      color: #ef4444;
    }

    /* Car Animation Styles */
    .car-animation-container {
      position: absolute;
      bottom: 5%;
      right: 5%;
      width: 400px;
      height: 150px;
      z-index: 1;
      opacity: 0.85;
      pointer-events: none;
      animation: fadeInCar 2s 1s ease-out forwards;
    }

    @keyframes fadeInCar {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 0.85;
        transform: translateY(0);
      }
    }

    /* AI Chat Styles - Modern Realistic Chat Interface */
    .ai-chat-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      z-index: 70;
      transition: var(--transition);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(14, 165, 255, 0.4);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(14, 165, 255, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(14, 165, 255, 0);
      }
    }

    .ai-chat-button:hover {
      transform: scale(1.05);
      animation-play-state: paused;
    }

    .ai-chat-button svg {
      width: 30px;
      height: 30px;
      fill: white;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .ai-chat-container {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 380px;
      height: 500px;
      background: var(--chat-bg);
      border-radius: 16px;
      box-shadow: var(--shadow-lg);
      z-index: 70;
      display: flex;
      flex-direction: column;
      opacity: 0;
      transform: translateY(20px);
      visibility: hidden;
      transition: var(--transition);
      overflow: hidden;
    }

    .ai-chat-container.active {
      opacity: 1;
      transform: none;
      visibility: visible;
    }

    .ai-chat-header {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      padding: 16px;
      border-radius: 16px 16px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    .ai-chat-header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      height: 1px;
      background: rgba(255, 255, 255, 0.1);
    }

    .ai-chat-status {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      font-weight: 600;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #4ade80;
      animation: statusPulse 2s infinite;
    }

    @keyframes statusPulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    .status-text {
      font-size: 12px;
      opacity: 0.8;
    }

    .ai-chat-header-buttons {
      display: flex;
      gap: 8px;
    }

    .ai-chat-header-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      cursor: pointer;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .ai-chat-header-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .ai-chat-header-btn svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .ai-chat-messages {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 350px;
    }

    .ai-message {
      max-width: 80%;
      padding: 12px 16px;
      border-radius: 18px;
      word-wrap: break-word;
      position: relative;
      animation: messageSlideIn 0.3s ease-out;
    }

    @keyframes messageSlideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .ai-message.user {
      align-self: flex-end;
      background: var(--chat-sent);
      color: white;
      margin-left: auto;
    }

    .ai-message.bot {
      align-self: flex-start;
      background: var(--chat-received);
      color: var(--text);
      margin-right: auto;
    }

    .ai-message-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 4px;
      flex-shrink: 0;
    }

    .ai-message.user .ai-message-avatar {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
    }

    .ai-message.bot .ai-message-avatar {
      background: var(--chat-typing);
      color: white;
    }

    .ai-message-content {
      flex: 1;
    }

    .ai-message-text {
      font-size: 14px;
      line-height: 1.4;
      word-wrap: break-word;
    }

    .ai-message-time {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .ai-message-typing {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 8px 12px;
      background: var(--chat-received);
      border-radius: 18px;
      width: fit-content;
      margin-right: auto;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .typing-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--chat-typing);
      animation: typingDot 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) {
      animation-delay: -0.32s;
    }

    .typing-dot:nth-child(2) {
      animation-delay: -0.16s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0s;
    }

    @keyframes typingDot {
      0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .ai-chat-input-container {
      padding: 16px;
      border-top: 1px solid rgba(11, 18, 32, 0.1);
      display: flex;
      gap: 12px;
      align-items: center;
    }

    [data-theme="dark"] .ai-chat-input-container {
      border-top-color: rgba(255, 255, 255, 0.1);
    }

    .ai-input-wrapper {
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      background: var(--card);
      border-radius: 24px;
      border: 1px solid rgba(11, 18, 32, 0.1);
      transition: var(--transition);
    }

    .ai-input-wrapper:focus-within {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-light);
    }

    .ai-chat-input {
      flex: 1;
      padding: 12px 16px;
      border-radius: 24px;
      border: none;
      background: transparent;
      color: var(--text);
      outline: none;
      font-size: 14px;
      resize: none;
    }

    .ai-chat-tools {
      display: flex;
      gap: 8px;
    }

    .ai-chat-tool-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      color: var(--muted);
      position: relative;
    }

    .ai-chat-tool-btn:hover {
      background: var(--accent-light);
      color: var(--accent);
      transform: scale(1.05);
    }

    .ai-chat-tool-btn.active {
      background: var(--accent);
      color: white;
    }

    .ai-chat-tool-btn svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .ai-chat-send {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border: none;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .ai-chat-send:hover {
      transform: scale(1.05);
    }

    .ai-chat-send::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .ai-chat-send:hover::before {
      left: 100%;
    }

    .ai-chat-send svg {
      width: 20px;
      height: 20px;
      fill: white;
      z-index: 1;
    }

    /* Tooltips */
    .ai-tooltip {
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--text);
      color: var(--card);
      padding: 6px 8px;
      border-radius: 6px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
      z-index: 1000;
    }

    .ai-chat-tool-btn:hover .ai-tooltip {
      opacity: 1;
      bottom: calc(100% + 8px);
    }

    /* File upload styling */
    .file-upload {
      position: relative;
      display: inline-block;
      cursor: pointer;
      overflow: hidden;
    }

    .file-upload input[type=file] {
      position: absolute;
      left: -9999px;
    }

    .file-upload-label {
      display: inline-block;
      padding: 8px 16px;
      background: var(--accent-light);
      color: var(--accent);
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .file-upload-label:hover {
      background: var(--accent);
      color: white;
    }

    /* Modal for AI Assistant */
    .ai-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    .ai-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .ai-modal-content {
      background: var(--card);
      border-radius: 16px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
      transform: translateY(20px);
      transition: var(--transition);
    }

    .ai-modal.active .ai-modal-content {
      transform: none;
    }

    .ai-modal-header {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      padding: 16px;
      border-radius: 16px 16px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .ai-modal-close {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 18px;
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: var(--transition);
    }

    .ai-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .ai-modal-body {
      padding: 20px;
    }

    .ai-modal-steps {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .ai-modal-step {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .ai-modal-step-number {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      flex-shrink: 0;
    }

    .ai-modal-step-content {
      flex: 1;
    }

    .ai-modal-step-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--text);
    }

    .ai-modal-step-description {
      color: var(--muted);
      font-size: 14px;
    }

    .ai-modal-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 8px;
    }

    .ai-modal-option {
      padding: 12px;
      border: 1px solid rgba(11, 18, 32, 0.1);
      border-radius: 8px;
      background: transparent;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
    }

    [data-theme="dark"] .ai-modal-option {
      border-color: rgba(255, 255, 255, 0.1);
    }

    .ai-modal-option:hover {
      background: var(--accent-light);
      border-color: var(--accent);
    }

    .ai-modal-option.selected {
      background: var(--accent-light);
      border-color: var(--accent);
    }

    .ai-modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 20px;
    }

    /* Cookie Consent Banner */
    .cookie-consent {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: var(--card);
      color: var(--text);
      padding: 20px;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      transform: translateY(100%);
      transition: transform 0.3s ease;
      border-top: 1px solid rgba(11, 18, 32, 0.1);
    }

    [data-theme="dark"] .cookie-consent {
      border-top-color: rgba(255, 255, 255, 0.1);
    }

    .cookie-consent.show {
      transform: translateY(0);
    }

    .cookie-consent-container {
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
    }

    .cookie-consent-text {
      flex: 1;
    }

    .cookie-consent-title {
      font-weight: 700;
      margin-bottom: 5px;
    }

    .cookie-consent-description {
      font-size: 14px;
      color: var(--muted);
    }

    .cookie-consent-buttons {
      display: flex;
      gap: 10px;
    }

    .cookie-consent-button {
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      border: none;
    }

    .cookie-consent-accept {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
    }

    .cookie-consent-decline {
      background: transparent;
      color: var(--muted);
      border: 1px solid rgba(11, 18, 32, 0.1);
    }

    [data-theme="dark"] .cookie-consent-decline {
      border-color: rgba(255, 255, 255, 0.1);
    }

    .cookie-consent-settings {
      background: transparent;
      color: var(--accent);
      border: none;
      text-decoration: underline;
    }

    /* Privacy Policy Section */
    .privacy-policy {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      line-height: 1.6;
      display: none;
    }

    .privacy-policy.active {
      display: block;
    }

    .privacy-policy h1 {
      margin-bottom: 1rem;
      color: var(--text);
    }

    .privacy-policy h2 {
      margin-top: 2rem;
      margin-bottom: 1rem;
      color: var(--text);
    }

    .privacy-policy p {
      margin-bottom: 1rem;
      color: var(--muted);
    }

    .privacy-policy ul {
      margin-bottom: 1rem;
      padding-left: 2rem;
      color: var(--muted);
    }

    .privacy-policy li {
      margin-bottom: 0.5rem;
    }

    /* Responsive adjustments */
    @media (max-width: 1200px) {
      .car-animation-container {
        width: 320px;
        height: 120px;
        bottom: 3%;
      }
    }

    @media (max-width: 768px) {
      .car-animation-container {
        width: 250px;
        height: 100px;
        bottom: 1%;
        right: 2%;
        opacity: 0.7;
      }
      
      .ai-chat-container {
        width: calc(100vw - 40px);
        right: 20px;
        left: 20px;
        height: 400px;
      }
      
      .ai-modal-content {
        width: 95%;
      }
      
      .ai-modal-options {
        grid-template-columns: 1fr;
      }
      
      .cookie-consent-container {
        flex-direction: column;
        text-align: center;
      }
      
      .cookie-consent-buttons {
        width: 100%;
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .car-animation-container {
        display: none;
      }
      
      .social-link {
        width: 36px;
        height: 36px;
      }
      
      .social-link svg {
        width: 18px;
        height: 18px;
      }
    }

    @media (max-width: 520px) {
      .logo {
        width: 42px;
        height: 42px;
        font-size: 0.85rem;
      }

      .header-bar {
        padding: 0.5rem 0.8rem;
      }

      .container {
        padding: 1.1rem;
      }

      .hero {
        gap: 1rem;
      }

      .actions {
        flex-direction: column;
        align-items: stretch;
      }

      .btn-outline,
      .btn-primary {
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-bar">
      <div class="brand">
        <div class="logo" aria-hidden="true" onclick="location.reload()">PS</div>
        <div>
          <h1 style="font-size:0.95rem;margin:0">Prashanta Subedi</h1>
          <div class="muted" style="font-size:.78rem;margin-top:4px;color:var(--muted)">Web & App Developer</div>
        </div>
      </div>

      <nav aria-label="Main navigation">
        <a href="#about">About</a>
        <a href="#services">Services</a>
        <a href="#request" class="underline">Request</a>
        <button class="theme-toggle" aria-label="Toggle dark mode" id="themeToggle">
          <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="moon-icon" style="display:none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        <a class="cta" href="#request">Let's talk</a>
      </nav>
    </div>
  </header>

  <main class="container" style="position:relative;z-index:10">
    <section class="hero" aria-label="Intro">
      <div class="hero-left">
        <h2 class="reveal">
          <div class="intro">
            <span class="name">Hi ‚Äî I'm <strong style="background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent">Prashanta Subedi</strong></span>
            <span class="typed" aria-hidden="true" id="typedText"></span>
          </div>
        </h2>

        <p class="reveal">I design and build modern, performant websites and cross-platform apps. I focus on accessibility, clean code, and delivering business-ready solutions that scale.</p>

        <div class="actions reveal" style="display:flex;gap:12px">
          <a class="btn-primary" href="#request">Request a Project</a>
          <button id="profileBtn" class="btn-outline" type="button" aria-expanded="false">See Full Profile</button>
        </div>

        <div style="margin-top:1.2rem;display:flex;gap:12px;align-items:center" class="reveal">
          <div class="tag">Available for hire</div>
          <div style="color:var(--muted)">Remote ‚Äî open to freelance & contract work</div>
        </div>

        <!-- keep full profile panel (optional) but removed right-side profile card as requested -->
        <div id="profileFull" class="profile-full" aria-hidden="true">
          <h3 style="margin-top:0;color:var(--text)">Full profile</h3>
          <div class="list">
            <div>
              <strong>Location</strong>
              <div class="muted">Nepal ‚Äî Remote</div>
            </div>
            <div>
              <strong>Education</strong>
              <div class="muted">Graduated from Balmiki</div>
            </div>
            <div>
              <strong>Certifications</strong>
              <div class="muted">Python, HTML, PHP, Java, and additional training</div>
            </div>
            <div>
              <strong>Focus</strong>
              <div class="muted">Web & Mobile apps, performance, accessibility</div>
            </div>
          </div>

          <hr style="border:none;border-top:1px solid rgba(11,18,32,0.04);margin:10px 0">

          <p style="margin:0;color:var(--muted)">If you'd like a professional website or app for business, product, or portfolio use, I can help from planning and UI/UX to development and deployment. Contact me to discuss scope and timelines.</p>

          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
            <span class="tag">React</span>
            <span class="tag">React Native</span>
            <span class="tag">Node</span>
            <span class="tag">TypeScript</span>
            <span class="tag">Python</span>
            <span class="tag">PHP</span>
            <span class="tag">Java</span>
          </div>
        </div>
      </div>

      <!-- decorative shapes behind content -->
      <div class="shapes" aria-hidden="true">
        <div class="shape s1"></div>
        <div class="shape s2"></div>
        <div class="shape s3"></div>
      </div>

      <!-- pebble floating circles (transparent look on light BG) -->
      <div class="pebbles" aria-hidden="true">
        <div class="pebble big" style="left:6%; top:22%; animation-delay:0s;"></div>
        <div class="pebble med" style="left:22%; top:8%; animation-delay:1.4s;"></div>
        <div class="pebble small" style="left:42%; top:34%; animation-delay:2.1s;"></div>
        <div class="pebble med" style="left:65%; top:6%; animation-delay:0.6s;"></div>
        <div class="pebble small" style="left:78%; top:28%; animation-delay:3.2s;"></div>
        <div class="pebble big" style="left:88%; top:52%; animation-delay:1.8s;"></div>
      </div>

      <!-- Car Animation Container -->
      <div class="car-animation-container" aria-hidden="true">
        <lottie-player
          src="https://lottie.host/4a742a20-6b79-4088-a5c7-6f5c4c6c3a5f/6eL7bQ9J7l.json"
          background="transparent"
          speed="1"
          style="width: 100%; height: 100%;"
          loop
          autoplay>
        </lottie-player>
      </div>
    </section>

    <section id="about" class="about reveal">
      <h2>About Me</h2>
      <p style="color:var(--muted)">I'm Prashanta, a developer from Nepal. I build modern, responsive websites and applications using current tools and best practices. I prioritize performance, accessibility, and delivering measurable business value.</p>
    </section>

    <section id="services" class="services reveal">
      <h2>Services</h2>
      <div class="cards">
        <div class="card reveal" style="transition-delay:.06s">
          <h3>Website Development</h3>
          <p>Responsive, accessible and SEO-friendly websites tuned for speed and conversion.</p>
        </div>
        <div class="card reveal" style="transition-delay:.12s">
          <h3>Mobile Apps</h3>
          <p>Cross-platform apps using React Native or native tooling ‚Äî smooth, performant UX.</p>
        </div>
        <div class="card reveal" style="transition-delay:.18s">
          <h3>Product & Landing Pages</h3>
          <p>Professional portfolios and product landing pages with polished interactions.</p>
        </div>
      </div>
    </section>

    <section id="request" class="request reveal">
      <h2>Request a Project</h2>

      <form id="projectForm" class="form" action="https://formspree.io/f/xovgolly" method="POST" novalidate>
        <div class="field">
          <label for="name">Name</label>
          <input id="name" name="name" type="text" placeholder="Your Name" required>
        </div>

        <div class="field">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@company.com" required>
        </div>

        <div class="field">
          <label for="project_type">Project Type</label>
          <select id="project_type" name="project_type" required>
            <option value="">Select Project Type</option>
            <option>Website</option>
            <option>Mobile App</option>
            <option>Branding / Marketing</option>
            <option>Other</option>
          </select>
        </div>

        <div class="field">
          <label for="budget">Estimated Budget</label>
          <input id="budget" name="budget" type="text" placeholder="Estimated budget (optional)">
        </div>

        <div style="grid-column:1 / -1" class="field">
          <label for="message">Project details</label>
          <textarea id="message" name="message" placeholder="Tell me about the project..." required></textarea>
        </div>

        <div style="grid-column:1 / -1;display:flex;justify-content:space-between;align-items:center;margin-top:6px;flex-wrap:wrap;gap:12px">
          <div class="hint" style="color:var(--muted)">I'll reply within 48 hours ‚Äî or <button class="mail-me-btn" type="button">Mail me</button></div>
          <div class="submit-wrap">
            <button type="submit" class="btn-primary">Submit Request</button>
            <button type="reset" class="btn-outline">Reset</button>
          </div>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-left">
          <div style="color:var(--muted)">¬© <strong>Prashanta Subedi</strong> ‚Äî Built with care.</div>
          <div class="social" aria-hidden="false">
            <a href="https://github.com/prashantaasubedii" target="_blank" rel="noopener" aria-label="GitHub" class="social-link github">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 1.008-.322 3.301 1.236-3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
            </a>
            <a href="https://www.linkedin.com/in/prashanta-subedi-57425a39a/" target="_blank" rel="noopener" aria-label="LinkedIn" class="social-link linkedin">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
              </svg>
            </a>
            <a href="https://instagram.com/prashantasubedi2" target="_blank" rel="noopener" aria-label="Instagram" class="social-link instagram">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.644.069 4.849 0 3.204-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.849.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1 1 12.324 0 6.162 6.162 0 0 1-12.324 0zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm4.965-10.405a1.44 1.44 0 1 1 2.881.001 1.44 1.44 0 0 1-2.881-.001z"/>
              </svg>
            </a>
            <button class="mail-me-btn social-link email" type="button" aria-label="Email">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2-2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
            </button>
            <button class="social-link privacy" id="privacyPolicyBtn" aria-label="Privacy Policy">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                <polyline points="9 11 12 14 16 9"></polyline>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <div id="toast" role="alert" aria-live="polite">
    <span id="toastMessage">Message sent ‚Äî I'll get back to you soon!</span>
    <span id="toastIcon" style="margin-left: 8px;">‚úì</span>
  </div>

  <!-- AI Chat Button with Modern Realistic Design -->
  <div class="ai-chat-button" id="aiChatButton">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
      <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1.9-2-2-2z"/>
      <path d="M6 9h12M6 13h8"/>
    </svg>
  </div>

  <!-- AI Chat Container with Modern Realistic Interface -->
  <div class="ai-chat-container" id="aiChatContainer">
    <div class="ai-chat-header">
      <div class="ai-chat-status">
        <div class="status-dot"></div>
        <span class="status-text">AI Assistant</span>
      </div>
      <div class="ai-chat-header-buttons">
        <button class="ai-chat-header-btn" id="aiProjectAssistantBtn" title="Project Assistant">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2H6a2 2 0 0 0-2 2V8z"/>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
        </button>
        <button class="ai-chat-header-btn" id="aiChatClose" title="Close">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="18" x2="18" y2="6"></line>
          </svg>
        </button>
      </div>
    </div>
    
    <div class="ai-chat-messages" id="aiChatMessages">
      <div class="ai-message bot">
        <div class="ai-message-avatar">AI</div>
        <div class="ai-message-content">
          <div class="ai-message-text">Hi! I'm Prashant's AI assistant. I can help you with project ideas, analyze images or websites, and answer questions about his services. How can I help you today?</div>
          <div class="ai-message-time">Just now</div>
        </div>
      </div>
    </div>
    
    <div class="ai-chat-input-container">
      <div class="ai-input-wrapper">
        <input type="text" class="ai-chat-input" id="aiChatInput" placeholder="Type your message...">
        <div class="ai-chat-tools">
          <button class="ai-chat-tool-btn" id="imageUploadBtn" title="Upload Image">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 15"></polyline>
            </svg>
            <span class="ai-tooltip">Upload Image</span>
          </button>
          <button class="ai-chat-tool-btn" id="websiteAnalysisBtn" title="Analyze Website">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 22 9.27 17 15.09 8.26 12 2"></polygon>
            </svg>
            <span class="ai-tooltip">Analyze Website</span>
          </button>
        </div>
      </div>
      <button class="ai-chat-send" id="aiChatSend" title="Send Message">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
        </svg>
      </button>
    </div>
    
    <!-- Hidden file input for image upload -->
    <input type="file" id="imageInput" accept="image/*" style="display: none;">
  </div>

  <!-- AI Project Assistant Modal -->
  <div class="ai-modal" id="aiModal">
    <div class="ai-modal-content">
      <div class="ai-modal-header">
        <div>AI Project Assistant</div>
        <button class="ai-modal-close" id="aiModalClose">√ó</button>
      </div>
      <div class="ai-modal-body">
        <div class="ai-modal-steps">
          <div class="ai-modal-step">
            <div class="ai-modal-step-number">1</div>
            <div class="ai-modal-step-content">
              <div class="ai-modal-step-title">Project Type</div>
              <div class="ai-modal-step-description">What type of project are you looking to create?</div>
              <div class="ai-modal-options">
                <div class="ai-modal-option" data-value="Website">Website</div>
                <div class="ai-modal-option" data-value="Mobile App">Mobile App</div>
                <div class="ai-modal-option" data-value="Branding / Marketing">Branding / Marketing</div>
                <div class="ai-modal-option" data-value="Other">Other</div>
              </div>
            </div>
          </div>
          
          <div class="ai-modal-step">
            <div class="ai-modal-step-number">2</div>
            <div class="ai-modal-step-content">
              <div class="ai-modal-step-title">Project Details</div>
              <div class="ai-modal-step-description">Tell me more about your project requirements</div>
              <textarea id="projectDetails" style="width:100%;min-height:100px;padding:10px;border:1px solid rgba(11, 18, 32, 0.1);border-radius:8px;background:transparent;color:var(--text);resize:vertical;" placeholder="Describe your project requirements..."></textarea>
            </div>
          </div>
          
          <div class="ai-modal-step">
            <div class="ai-modal-step-number">3</div>
            <div class="ai-modal-step-content">
              <div class="ai-modal-step-title">Timeline & Budget</div>
              <div class="ai-modal-step-description">What's your expected timeline and budget?</div>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                <input type="text" id="projectTimeline" style="padding:10px;border:1px solid rgba(11, 18, 32, 0.1);border-radius:8px;background:transparent;color:var(--text);" placeholder="Expected timeline">
                <input type="text" id="projectBudget" style="padding:10px;border:1px solid rgba(11, 18, 32, 0.1);border-radius:8px;background:transparent;color:var(--text);" placeholder="Budget range">
              </div>
            </div>
          </div>
        </div>
        
        <div class="ai-modal-actions">
          <button class="btn-outline" id="aiModalCancel">Cancel</button>
          <button class="btn-primary" id="aiModalGenerate">Generate Project Plan</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Cookie Consent Banner -->
  <div class="cookie-consent" id="cookieConsent">
    <div class="cookie-consent-container">
      <div class="cookie-consent-text">
        <div class="cookie-consent-title">Cookie Consent</div>
        <div class="cookie-consent-description">We use cookies to enhance your experience, analyze site traffic, and personalize content. By continuing to use this site, you agree to our use of cookies.</div>
      </div>
      <div class="cookie-consent-buttons">
        <button class="cookie-consent-button cookie-consent-accept" id="cookieAccept">Accept All</button>
        <button class="cookie-consent-button cookie-consent-decline" id="cookieDecline">Essential Only</button>
        <button class="cookie-consent-button cookie-consent-settings" id="cookieSettings">Settings</button>
      </div>
    </div>
  </div>

  <!-- Privacy Policy Section -->
  <section id="privacy-policy" class="privacy-policy container">
    <h1>Privacy Policy</h1>
    <p>Last updated: [Current Date]</p>
    
    <h2>Information We Collect</h2>
    <p>When you visit our website, we may collect certain information automatically, including:</p>
    <ul>
      <li>IP address and geolocation data</li>
      <li>Browser type, operating system, and device information</li>
      <li>Pages visited and time spent on each page</li>
      <li>Referring website</li>
      <li>Interaction data (clicks, form submissions, etc.)</li>
    </ul>
    
    <h2>How We Use This Information</h2>
    <p>We use collected information to:</p>
    <ul>
      <li>Analyze website traffic and user behavior</li>
      <li>Improve our website and services</li>
      <li>Respond to inquiries and service requests</li>
      <li>Personalize content and user experience</li>
    </ul>
    
    <h2>Google Analytics</h2>
    <p>This website uses Google Analytics, a web analytics service provided by Google. Google Analytics uses cookies to collect information about how visitors use our website. This information is processed by Google to provide us with reports on website activity.</p>
    
    <h2>Your Rights</h2>
    <p>You have right to:</p>
    <ul>
      <li>Know what personal data we collect</li>
      <li>Request deletion of your personal data</li>
      <li>Opt-out of data collection</li>
      <li>Request a copy of your personal data</li>
    </ul>
    
    <h2>Contact Us</h2>
    <p>If you have any questions about this Privacy Policy, please contact us at: prashantaasubedii@gmail.com</p>
    
    <div style="margin-top:2rem;">
      <button class="btn-primary" id="backToSite">Back to Site</button>
    </div>
  </section>

  <script>
    // Z.AI API Configuration
    const ZAI_API_KEY = 'f6838631099f422cba210f5189211295.M3f9Yt3Xvq31RHDh';
    const ZAI_API_URL = 'https://api.z.ai/api/paas/v4/chat/completions';

    // Device detection
    function detectDevice() {
      const userAgent = navigator.userAgent;
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
      const isTablet = /iPad|Android(?!.*Mobile)|Tablet/i.test(userAgent);
      const isDesktop = !isMobile && !isTablet;
      const isIOS = /iPad|iPhone|iPod/.test(userAgent);
      const isAndroid = /Android/.test(userAgent);
      
      return {
        isMobile,
        isTablet,
        isDesktop,
        isIOS,
        isAndroid,
        screenWidth: window.innerWidth,
        screenHeight: window.innerHeight
      };
    }

    // Apply device-specific adjustments
    function applyDeviceAdjustments() {
      const device = detectDevice();
      const aiChatContainer = document.getElementById('aiChatContainer');
      const aiChatButton = document.getElementById('aiChatButton');
      
      if (device.isMobile || device.isTablet) {
        // Adjust chat container for mobile/tablet
        if (aiChatContainer) {
          aiChatContainer.style.width = 'calc(100vw - 40px)';
          aiChatContainer.style.height = device.screenHeight > 600 ? '60vh' : '50vh';
          aiChatContainer.style.bottom = '70px';
        }
        
        // Adjust button position for mobile
        if (aiChatButton) {
          aiChatButton.style.bottom = '15px';
          aiChatButton.style.right = '15px';
        }
      } else {
        // Desktop adjustments
        if (aiChatContainer) {
          aiChatContainer.style.width = device.screenWidth > 1200 ? '420px' : '380px';
          aiChatContainer.style.height = '500px';
        }
      }
      
      // iOS-specific adjustments
      if (device.isIOS) {
        if (aiChatContainer) {
          aiChatContainer.style.bottom = '80px';
        }
      }
      
      // Android-specific adjustments
      if (device.isAndroid) {
        if (aiChatContainer) {
          aiChatContainer.style.bottom = '80px';
        }
      }
      
      // Landscape mode adjustments
      if (window.innerWidth > window.innerHeight && (device.isMobile || device.isTablet)) {
        if (aiChatContainer) {
          aiChatContainer.style.height = '40vh';
        }
      }
    }

    // Initialize device adjustments on load
    document.addEventListener('DOMContentLoaded', applyDeviceAdjustments);
    
    // Re-apply on resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(applyDeviceAdjustments, 250);
    });

    // Theme toggle functionality
    (function() {
      const themeToggle = document.getElementById('themeToggle');
      const sunIcon = themeToggle.querySelector('.sun-icon');
      const moonIcon = themeToggle.querySelector('.moon-icon');
      const htmlElement = document.documentElement;
      
      // Check for saved theme preference or default to light
      const currentTheme = localStorage.getItem('theme') || 'light';
      htmlElement.setAttribute('data-theme', currentTheme);
      
      // Update icon based on current theme
      if (currentTheme === 'dark') {
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      }
      
      themeToggle.addEventListener('click', function() {
        const theme = htmlElement.getAttribute('data-theme');
        const newTheme = theme === 'dark' ? 'light' : 'dark';
        
        htmlElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        
        // Update icon
        if (newTheme === 'dark') {
          sunIcon.style.display = 'none';
          moonIcon.style.display = 'block';
        } else {
          sunIcon.style.display = 'block';
          moonIcon.style.display = 'none';
        }
        
        // Track theme change in Google Analytics
        gtag('event', 'theme_change', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'theme_change',
          'from_theme': theme,
          'to_theme': newTheme
        });
      });
    })();

    // reveal on scroll
    (function() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            entry.target.classList.add('reveal--shown');
            observer.unobserve(entry.target);
          }
        });
      }, {
        threshold: 0.12
      });

      document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    })();

    // hero typed rotator (stable)
    (function() {
      const words = [
        'Full‚Äëstack developer',
        'React & React Native',
        'Performance & Accessibility',
        'Business-ready apps',
        'Design ‚Üí Code ‚Üí Ship',
        'AI-Powered Solutions'
      ];
      const el = document.getElementById('typedText');
      if (!el) return;
      const cursor = document.createElement('span');
      cursor.className = 'cursor';
      cursor.style.display = 'inline-block';
      cursor.style.width = '2px';
      cursor.style.height = '1.06em';
      cursor.style.background = 'var(--text)';
      cursor.style.marginLeft = '6px';
      cursor.style.animation = 'blink 1s step-start infinite';
      el.appendChild(cursor);

      let w = 0,
        offset = 0,
        forward = true,
        skip = 0,
        skipWait = 16;

      function tick() {
        const word = words[w];
        if (forward) {
          if (offset < word.length) offset++;
          else {
            skip++;
            if (skip > skipWait) {
              forward = false;
              skip = 0;
            }
          }
        } else {
          if (offset > 0) offset--;
          else {
            forward = true;
            w = (w + 1) % words.length;
          }
        }
        // update visible text (keep cursor appended)
        el.childNodes.forEach(n => {
          if (n.nodeType === Node.TEXT_NODE) n.remove();
        });
        el.insertBefore(document.createTextNode(word.substr(0, offset)), cursor);
        setTimeout(tick, forward ? 70 : 40);
      }
      setTimeout(tick, 600);
    })();

    // profile toggle (keeps full profile panel)
    (function() {
      const btn = document.getElementById('profileBtn');
      const panel = document.getElementById('profileFull');
      if (!btn || !panel) return;
      btn.addEventListener('click', () => {
        const open = panel.classList.toggle('open');
        panel.setAttribute('aria-hidden', (!open).toString());
        btn.setAttribute('aria-expanded', open.toString());
        btn.textContent = open ? 'Hide Profile' : 'See Full Profile';
        
        // Track profile view in Google Analytics
        gtag('event', 'profile_view', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'profile_view',
          'action': open ? 'open' : 'close'
        });
      });
    })();

    // Mail me functionality
    (function() {
      const mailMeBtns = document.querySelectorAll('.mail-me-btn');
      
      mailMeBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          // Obfuscate email to prevent scraping
          const user = 'prashantaasubedii';
          const domain = 'gmail.com';
          const email = user + '@' + domain;
          
          // Track email click in Google Analytics
          gtag('event', 'email_click', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'email_click'
          });
          
          // Create a mailto link and redirect
          window.location.href = 'mailto:' + email;
        });
      });
    })();

    // form submit (uses your Formspree endpoint)
    (function() {
      const form = document.getElementById('projectForm');
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      const toastIcon = document.getElementById('toastIcon');
      if (!form) return;
      
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const data = new FormData(form);
        const action = form.getAttribute('action') || '';
        const submitBtn = form.querySelector('button[type="submit"]');
        
        // Track form submission start in Google Analytics
        gtag('event', 'form_submit_start', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'form_submit',
          'form_type': 'project_request'
        });
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<span class="spinner"></span> Sending...';
        
        try {
          // submit to Formspree
          const res = await fetch(action, {
            method: 'POST',
            body: data,
            headers: {
              'Accept': 'application/json'
            }
          });
          
          if (res.ok) {
            // Track successful form submission in Google Analytics
            gtag('event', 'form_submit_success', {
              'custom_dimension_1': 'conversion',
              'custom_dimension_2': 'form_submit',
              'form_type': 'project_request'
            });
            
            showToast('Message sent ‚Äî I will get back to you soon!', 'success');
            form.reset();
          } else {
            // Track failed form submission in Google Analytics
            gtag('event', 'form_submit_error', {
              'custom_dimension_1': 'error',
              'custom_dimension_2': 'form_submit',
              'form_type': 'project_request'
            });
            
            showToast('There was an issue sending your message. Try again or email directly.', 'error');
          }
        } catch (err) {
          // Track form submission exception in Google Analytics
          gtag('event', 'form_submit_exception', {
            'custom_dimension_1': 'error',
            'custom_dimension_2': 'form_submit',
            'form_type': 'project_request'
          });
          
          showToast('Network error ‚Äî please try again later.', 'error');
        } finally {
          // Reset button state
          submitBtn.disabled = false;
          submitBtn.textContent = 'Submit Request';
        }
      });

      function showToast(msg, type = 'success') {
        if (!toast) return;
        
        toastMessage.textContent = msg;
        
        // Update icon and color based on type
        if (type === 'error') {
          toastIcon.textContent = '‚úï';
          toast.style.background = 'linear-gradient(90deg, #ef4444, #dc2626)';
        } else {
          toastIcon.textContent = '‚úì';
          toast.style.background = 'linear-gradient(90deg, var(--accent), var(--accent-2))';
        }
        
        toast.classList.add('show');
        
        setTimeout(() => {
          toast.classList.remove('show');
        }, 4200);
      }
    })();

    // AI Chat Functionality with Modern Realistic Interface
    (function() {
      const aiChatButton = document.getElementById('aiChatButton');
      const aiChatContainer = document.getElementById('aiChatContainer');
      const aiChatClose = document.getElementById('aiChatClose');
      const aiChatMessages = document.getElementById('aiChatMessages');
      const aiChatInput = document.getElementById('aiChatInput');
      const aiChatSend = document.getElementById('aiChatSend');
      const imageUploadBtn = document.getElementById('imageUploadBtn');
      const websiteAnalysisBtn = document.getElementById('websiteAnalysisBtn');
      const projectAssistantBtn = document.getElementById('aiProjectAssistantBtn');
      const imageInput = document.getElementById('imageInput');
      
      // Toggle chat container
      aiChatButton.addEventListener('click', () => {
        aiChatContainer.classList.add('active');
        aiChatInput.focus();
        
        // Track chat open in Google Analytics
        gtag('event', 'chat_open', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'chat_interaction'
        });
      });
      
      aiChatClose.addEventListener('click', () => {
        aiChatContainer.classList.remove('active');
        
        // Track chat close in Google Analytics
        gtag('event', 'chat_close', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'chat_interaction'
        });
      });
      
      // Input focus handling
      aiChatInput.addEventListener('focus', () => {
        document.querySelector('.ai-input-wrapper').classList.add('focus-within');
      });
      
      aiChatInput.addEventListener('blur', () => {
        document.querySelector('.ai-input-wrapper').classList.remove('focus-within');
      });
      
      // Send message function
      const sendMessage = async () => {
        const message = aiChatInput.value.trim();
        if (!message) return;
        
        // Track message sent in Google Analytics
        gtag('event', 'chat_message_sent', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'chat_interaction',
          'message_length': message.length
        });
        
        // Add user message to chat
        addMessageToChat(message, 'user');
        aiChatInput.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        try {
          // Call Z.AI API
          const response = await fetch(ZAI_API_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${ZAI_API_KEY}`
            },
            body: JSON.stringify({
              model: 'glm-4.5-flash',
              messages: [
                {
                  role: 'system',
                  content: 'You are a helpful AI assistant for Prashanta Subedi, a web and app developer. You help visitors with questions about his services, project ideas, and technical advice. Be friendly, professional, and concise. If you don\'t know something, be honest about it.'
                },
                {
                  role: 'user',
                  content: message
                }
              ],
              temperature: 0.7,
              max_tokens: 800
            })
          });
          
          const data = await response.json();
          removeTypingIndicator();
          
          if (data.choices && data.choices.length > 0) {
            const aiResponse = data.choices[0].message.content;
            addMessageToChat(aiResponse, 'bot');
            
            // Track AI response in Google Analytics
            gtag('event', 'chat_ai_response', {
              'custom_dimension_1': 'system_interaction',
              'custom_dimension_2': 'chat_interaction',
              'response_length': aiResponse.length
            });
          } else {
            addMessageToChat('Sorry, I encountered an error. Please try again later.', 'bot');
            
            // Track AI error in Google Analytics
            gtag('event', 'chat_ai_error', {
              'custom_dimension_1': 'error',
              'custom_dimension_2': 'chat_interaction'
            });
          }
        } catch (error) {
          removeTypingIndicator();
          addMessageToChat('Sorry, I encountered an error. Please try again later.', 'bot');
          
          // Track API error in Google Analytics
          gtag('event', 'chat_api_error', {
            'custom_dimension_1': 'error',
            'custom_dimension_2': 'chat_interaction'
          });
          
          console.error('AI API Error:', error);
        }
      };
      
      // Add message to chat
      const addMessageToChat = (message, sender) => {
        const messageElement = document.createElement('div');
        messageElement.classList.add('ai-message', sender);
        
        const avatar = document.createElement('div');
        avatar.classList.add('ai-message-avatar');
        
        const content = document.createElement('div');
        content.classList.add('ai-message-content');
        
        const text = document.createElement('div');
        text.classList.add('ai-message-text');
        text.textContent = message;
        
        const time = document.createElement('div');
        time.classList.add('ai-message-time');
        time.textContent = 'Just now';
        
        content.appendChild(text);
        content.appendChild(time);
        messageElement.appendChild(avatar);
        messageElement.appendChild(content);
        
        aiChatMessages.appendChild(messageElement);
        aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
      };
      
      // Show typing indicator
      const showTypingIndicator = () => {
        const typingElement = document.createElement('div');
        typingElement.classList.add('ai-message-typing');
        typingElement.innerHTML = `
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        `;
        typingElement.classList.add('bot');
        typingElement.style.marginRight = 'auto';
        
        aiChatMessages.appendChild(typingElement);
        aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
      };
      
      // Remove typing indicator
      const removeTypingIndicator = () => {
        const typingElements = document.querySelectorAll('.ai-message-typing');
        typingElements.forEach(el => el.remove());
      };
      
      // Event listeners
      aiChatSend.addEventListener('click', sendMessage);
      aiChatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
      
      // Image upload functionality
      imageUploadBtn.addEventListener('click', () => {
        imageInput.click();
      });
      
      imageInput.addEventListener('change', async (e) => {
        if (!e.target.files.length) return;
        
        const file = e.target.files[0];
        const reader = new FileReader();
        
        reader.onload = async (event) => {
          const base64Image = event.target.result.split(',')[1];
          
          // Track image upload in Google Analytics
          gtag('event', 'chat_image_upload', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'chat_interaction',
            'file_size': file.size
          });
          
          // Add user message to chat
          addMessageToChat('Uploaded an image for analysis', 'user');
          
          // Show typing indicator
          showTypingIndicator();
          
          try {
            const response = await fetch(ZAI_API_URL, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${ZAI_API_KEY}`
              },
              body: JSON.stringify({
                model: 'glm-4.6v-flash',
                messages: [
                  {
                    role: 'system',
                    content: 'You are an AI assistant that analyzes images for web and app development purposes. Describe what you see in the image and provide suggestions for how it could be implemented in a website or app.'
                  },
                  {
                    role: 'user',
                    content: [
                      {
                        type: 'text',
                        text: 'Analyze this image and provide insights for web/app development.'
                      },
                      {
                        type: 'image_url',
                        image_url: {
                          url: `data:image/jpeg;base64,${base64Image}`
                        }
                      }
                    ]
                  }
                ],
                temperature: 0.7,
                max_tokens: 800
              })
            });
            
            const data = await response.json();
            removeTypingIndicator();
            
            if (data.choices && data.choices.length > 0) {
              const analysis = data.choices[0].message.content;
              addMessageToChat(analysis, 'bot');
              
              // Track image analysis in Google Analytics
              gtag('event', 'chat_image_analysis', {
                'custom_dimension_1': 'system_interaction',
                'custom_dimension_2': 'chat_interaction',
                'analysis_length': analysis.length
              });
            } else {
              addMessageToChat('Sorry, I encountered an error analyzing the image. Please try again.', 'bot');
              
              // Track image analysis error in Google Analytics
              gtag('event', 'chat_image_analysis_error', {
                'custom_dimension_1': 'error',
                'custom_dimension_2': 'chat_interaction'
              });
            }
          } catch (error) {
            removeTypingIndicator();
            addMessageToChat('Sorry, I encountered an error analyzing the image. Please try again.', 'bot');
            
            // Track image analysis API error in Google Analytics
            gtag('event', 'chat_image_analysis_api_error', {
              'custom_dimension_1': 'error',
              'custom_dimension_2': 'chat_interaction'
            });
            
            console.error('Image Analysis Error:', error);
          }
        };
        
        reader.readAsDataURL(file);
      });
      
      // Website analysis functionality
      websiteAnalysisBtn.addEventListener('click', () => {
        // Track website analysis request in Google Analytics
        gtag('event', 'chat_website_analysis_request', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'chat_interaction'
        });
        
        addMessageToChat('I want to analyze a website', 'user');
        
        // Show typing indicator
        showTypingIndicator();
        
        setTimeout(() => {
          removeTypingIndicator();
          addMessageToChat('Sure! Please provide the URL of the website you\'d like me to analyze.', 'bot');
        }, 1000);
      });
      
      // Project assistant functionality
      projectAssistantBtn.addEventListener('click', () => {
        // Track project assistant open in Google Analytics
        gtag('event', 'chat_project_assistant_open', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'chat_interaction'
        });
        
        // Open the AI Project Assistant modal
        document.getElementById('aiModal').classList.add('active');
      });
    })();

    // AI Project Assistant Modal
    (function() {
      const aiModal = document.getElementById('aiModal');
      const aiModalClose = document.getElementById('aiModalClose');
      const aiModalCancel = document.getElementById('aiModalCancel');
      const aiModalGenerate = document.getElementById('aiModalGenerate');
      const projectTypeOptions = document.querySelectorAll('.ai-modal-option');
      const projectDetails = document.getElementById('projectDetails');
      const projectTimeline = document.getElementById('projectTimeline');
      const projectBudget = document.getElementById('projectBudget');
      
      // Close modal
      aiModalClose.addEventListener('click', () => {
        aiModal.classList.remove('active');
        
        // Track modal close in Google Analytics
        gtag('event', 'project_assistant_modal_close', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'project_assistant'
        });
      });
      
      aiModalCancel.addEventListener('click', () => {
        aiModal.classList.remove('active');
        
        // Track modal cancel in Google Analytics
        gtag('event', 'project_assistant_modal_cancel', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'project_assistant'
        });
      });
      
      // Select project type
      projectTypeOptions.forEach(option => {
        option.addEventListener('click', () => {
          projectTypeOptions.forEach(opt => opt.classList.remove('selected'));
          option.classList.add('selected');
          
          // Track project type selection in Google Analytics
          gtag('event', 'project_type_selected', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'project_assistant',
            'project_type': option.getAttribute('data-value')
          });
        });
      });
      
      // Generate project plan
      aiModalGenerate.addEventListener('click', async () => {
        const selectedType = document.querySelector('.ai-modal-option.selected');
        const projectType = selectedType ? selectedType.getAttribute('data-value') : '';
        const details = projectDetails.value.trim();
        const timeline = projectTimeline.value.trim();
        const budget = projectBudget.value.trim();
        
        if (!projectType || !details) {
          showToast('Please select a project type and provide details', 'error');
          return;
        }
        
        // Track project plan generation in Google Analytics
        gtag('event', 'project_plan_generation', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'project_assistant',
          'project_type': projectType,
          'details_length': details.length
        });
        
        // Show loading state
        aiModalGenerate.disabled = true;
        aiModalGenerate.innerHTML = '<span class="spinner"></span> Generating...';
        
        try {
          const response = await fetch(ZAI_API_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${ZAI_API_KEY}`
            },
            body: JSON.stringify({
              model: 'glm-4.5-flash',
              messages: [
                {
                  role: 'system',
                  content: 'You are an AI assistant that helps with project planning for web and app development. Based on user\'s input, generate a comprehensive project description that can be used in a project request form. Include technical requirements, features, and implementation approach.'
                },
                {
                  role: 'user',
                  content: `Generate a project description for a ${projectType} with the following details: ${details}. Timeline: ${timeline}. Budget: ${budget}.`
                }
              ],
              temperature: 0.7,
              max_tokens: 800
            })
          });
          
          const data = await response.json();
          
          if (data.choices && data.choices.length > 0) {
            const projectDescription = data.choices[0].message.content;
            
            // Track successful project plan generation in Google Analytics
            gtag('event', 'project_plan_generation_success', {
              'custom_dimension_1': 'conversion',
              'custom_dimension_2': 'project_assistant',
              'project_type': projectType,
              'description_length': projectDescription.length
            });
            
            // Fill form with generated content
            document.getElementById('project_type').value = projectType;
            document.getElementById('message').value = projectDescription;
            document.getElementById('budget').value = budget;
            
            // Close modal
            aiModal.classList.remove('active');
            
            // Scroll to form
            document.getElementById('request').scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
            
            // Show success message
            showToast('Project plan generated and added to your request form!', 'success');
          } else {
            // Track project plan generation error in Google Analytics
            gtag('event', 'project_plan_generation_error', {
              'custom_dimension_1': 'error',
              'custom_dimension_2': 'project_assistant',
              'project_type': projectType
            });
            
            showToast('Sorry, I encountered an error generating the project plan. Please try again.', 'error');
          }
        } catch (error) {
          // Track project plan generation API error in Google Analytics
          gtag('event', 'project_plan_generation_api_error', {
            'custom_dimension_1': 'error',
            'custom_dimension_2': 'project_assistant',
            'project_type': projectType
          });
          
          showToast('Sorry, I encountered an error generating the project plan. Please try again.', 'error');
          console.error('Project Plan Error:', error);
        } finally {
          // Reset button state
          aiModalGenerate.disabled = false;
          aiModalGenerate.textContent = 'Generate Project Plan';
        }
      });
    })();

    // Auto-fill project form based on project type
    (function() {
      const projectTypeSelect = document.getElementById('project_type');
      const messageTextarea = document.getElementById('message');
      
      projectTypeSelect.addEventListener('change', () => {
        const projectType = projectTypeSelect.value;
        if (!projectType) return;
        
        // Track project type selection in Google Analytics
        gtag('event', 'project_type_selection', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'form_interaction',
          'project_type': projectType
        });
        
        // Generate auto-fill prompt based on project type
        let prompt = '';
        
        switch (projectType) {
          case 'Website':
            prompt = `I'm interested in a website project. I'm looking for:
- Type of website (e.g., portfolio, e-commerce, blog, corporate)
- Design preferences (modern, minimalist, colorful, etc.)
- Key features needed
- Any specific functionality requirements
- Target audience
- Content management needs`;
            break;
          case 'Mobile App':
            prompt = `I'm interested in a mobile app project. I'm looking for:
- Platform (iOS, Android, or both)
- App category (social, productivity, entertainment, etc.)
- Core features and functionality
- User authentication requirements
- API integration needs
- Monetization strategy`;
            break;
          case 'Branding / Marketing':
            prompt = `I'm interested in branding/marketing services. I need:
- Logo design concept
- Brand identity guidelines
- Marketing materials (brochures, flyers, etc.)
- Social media presence
- Brand strategy
- Target market analysis`;
            break;
          case 'Other':
            prompt = `I have a custom project that doesn't fit into standard categories. My requirements include:
- Project description
- Specific technical needs
- Timeline expectations
- Budget considerations
- Any other relevant details`;
            break;
        }
        
        messageTextarea.value = prompt;
      });
    })();

    // Cookie Consent Banner
    (function() {
      const cookieConsent = document.getElementById('cookieConsent');
      const cookieAccept = document.getElementById('cookieAccept');
      const cookieDecline = document.getElementById('cookieDecline');
      const cookieSettings = document.getElementById('cookieSettings');
      
      // Check if user has already made a choice
      const cookieChoice = localStorage.getItem('cookieConsent');
      
      if (!cookieChoice) {
        // Show cookie consent banner after a short delay
        setTimeout(() => {
          cookieConsent.classList.add('show');
          
          // Track cookie consent banner shown in Google Analytics
          gtag('event', 'cookie_consent_shown', {
            'custom_dimension_1': 'system_interaction',
            'custom_dimension_2': 'privacy'
          });
        }, 1000);
      } else if (cookieChoice === 'accepted') {
        // Enable enhanced tracking if user previously accepted
        gtag('consent', 'update', {
          'ad_storage': 'granted',
          'analytics_storage': 'granted'
        });
      }
      
      // Handle accept button
      cookieAccept.addEventListener('click', () => {
        localStorage.setItem('cookieConsent', 'accepted');
        cookieConsent.classList.remove('show');
        
        // Update Google Analytics consent
        gtag('consent', 'update', {
          'ad_storage': 'granted',
          'analytics_storage': 'granted'
        });
        
        // Track cookie consent acceptance in Google Analytics
        gtag('event', 'cookie_consent_accepted', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'privacy'
        });
      });
      
      // Handle decline button
      cookieDecline.addEventListener('click', () => {
        localStorage.setItem('cookieConsent', 'declined');
        cookieConsent.classList.remove('show');
        
        // Update Google Analytics consent
        gtag('consent', 'update', {
          'ad_storage': 'denied',
          'analytics_storage': 'denied'
        });
        
        // Track cookie consent decline in Google Analytics
        gtag('event', 'cookie_consent_declined', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'privacy'
        });
      });
      
      // Handle settings button
      cookieSettings.addEventListener('click', () => {
        // Show privacy policy section
        document.getElementById('privacy-policy').classList.add('active');
        document.getElementById('privacy-policy').scrollIntoView({
          behavior: 'smooth'
        });
        
        // Track cookie settings click in Google Analytics
        gtag('event', 'cookie_settings_click', {
          'custom_dimension_1': 'user_interaction',
          'custom_dimension_2': 'privacy'
        });
      });
    })();

    // Privacy Policy Page
    (function() {
      const backToSiteBtn = document.getElementById('backToSite');
      const privacyPolicyBtn = document.getElementById('privacyPolicyBtn');
      
      // Handle back to site button
      if (backToSiteBtn) {
        backToSiteBtn.addEventListener('click', () => {
          document.getElementById('privacy-policy').classList.remove('active');
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });
      }
      
      // Handle privacy policy button
      if (privacyPolicyBtn) {
        privacyPolicyBtn.addEventListener('click', () => {
          const privacyPolicy = document.getElementById('privacy-policy');
          privacyPolicy.classList.add('active');
          privacyPolicy.scrollIntoView({
            behavior: 'smooth'
          });
          
          // Track privacy policy view in Google Analytics
          gtag('event', 'privacy_policy_view', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'privacy'
          });
        });
      }
    })();

    // Enhanced Google Analytics tracking
    (function() {
      // Track page visibility changes
      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'visible') {
          gtag('event', 'page_visible', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'engagement',
            'page_title': document.title
          });
        } else {
          gtag('event', 'page_hidden', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'engagement',
            'page_title': document.title
          });
        }
      });
      
      // Track scroll depth
      let maxScrollPercentage = 0;
      window.addEventListener('scroll', () => {
        const scrollPercentage = Math.round(
          (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100
        );
        
        if (scrollPercentage > maxScrollPercentage) {
          maxScrollPercentage = scrollPercentage;
          
          // Track scroll milestones
          if (maxScrollPercentage === 25) {
            gtag('event', 'scroll_25_percent', {
              'custom_dimension_1': 'user_interaction',
              'custom_dimension_2': 'engagement'
            });
          } else if (maxScrollPercentage === 50) {
            gtag('event', 'scroll_50_percent', {
              'custom_dimension_1': 'user_interaction',
              'custom_dimension_2': 'engagement'
            });
          } else if (maxScrollPercentage === 75) {
            gtag('event', 'scroll_75_percent', {
              'custom_dimension_1': 'user_interaction',
              'custom_dimension_2': 'engagement'
            });
          } else if (maxScrollPercentage === 90) {
            gtag('event', 'scroll_90_percent', {
              'custom_dimension_1': 'user_interaction',
              'custom_dimension_2': 'engagement'
            });
          }
        }
      });
      
      // Track outbound links
      document.addEventListener('click', (e) => {
        const link = e.target.closest('a');
        if (!link) return;
        
        const href = link.getAttribute('href');
        if (href && href.includes('http') && !href.includes(window.location.hostname)) {
          gtag('event', 'outbound_link', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'navigation',
            'link_url': href
          });
        }
      });
      
      // Track time on page
      let timeOnPage = 0;
      setInterval(() => {
        timeOnPage += 5;
        
        // Track time on page milestones
        if (timeOnPage === 30) {
          gtag('event', 'time_on_page_30s', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'engagement'
          });
        } else if (timeOnPage === 60) {
          gtag('event', 'time_on_page_1m', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'engagement'
          });
        } else if (timeOnPage === 180) {
          gtag('event', 'time_on_page_3m', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'engagement'
          });
        } else if (timeOnPage === 300) {
          gtag('event', 'time_on_page_5m', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'engagement'
          });
        }
      }, 5000);
    })();

    // subtle parallax for decorative shapes & pebbles on pointer move (disabled on touch)
    (function() {
      const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
      if (isTouch) return;
      const movers = document.querySelectorAll('.shape, .pebble');
      if (!movers.length) return;
      
      window.addEventListener('mousemove', (e) => {
        const x = (e.clientX / window.innerWidth) - 0.5;
        const y = (e.clientY / window.innerHeight) - 0.5;
        
        movers.forEach((s, i) => {
          const depth = (i % 6 + 1) * 6;
          s.style.transform = `translate3d(${x * depth}px, ${y * depth}px, 0)`;
        });
      });
    })();

    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        
        // Skip if it's privacy policy link (handled separately)
        if (href === '#privacy-policy') return;
        
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
          
          // Track navigation in Google Analytics
          gtag('event', 'navigation_click', {
            'custom_dimension_1': 'user_interaction',
            'custom_dimension_2': 'navigation',
            'destination': href
          });
        }
      });
    });
  </script>
</body>
</html>
